<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>SWOC Quest ðŸŒŒ</title>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
<style>
body {
  margin:0; padding:0;
  font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
  background: radial-gradient(circle at top left, #0f0c29, #302b63, #24243e);
  color: #e0e0e0; text-align: center;
}
.container {
  max-width: 900px; margin: 2rem auto; padding: 2rem; border-radius: 15px;
  background: rgba(30,30,50,0.85); box-shadow: 0 0 40px rgba(72,61,139,0.5);
  transition: transform 0.3s;
}
h2 { color: #ffd700; }
button {
  padding: 1rem 2rem; margin-top: 1rem; font-size: 1rem;
  border:none; border-radius: 10px; cursor:pointer;
  background-color: #4a3f9f; color:#fff; transition:0.3s;
}
button:hover { background-color: #6c5fc7; box-shadow:0 0 15px rgba(108,95,199,0.6);}
.page-counter { margin-top: 1rem; font-size:0.9rem; color:#00ffff; }

/* Fancy tile selection */
.tile {
  display: inline-block; padding: 1rem 1.5rem; margin: 0.5rem;
  border-radius: 10px; cursor:pointer; background:#302b63; transition:0.3s;
}
.tile:hover { transform: scale(1.05); background:#4a3f9f; }
.tile.selected { background:#00ff9f; color:#000; transform:scale(1.1); }

/* Subcategory directory */
.subcategory { margin:1rem 0; cursor:pointer; color:#ffd700; transition:0.3s;}
.subcategory:hover { color:#00ffff; }

#downloadBtn { background:#00ff9f; color:#000; padding:1rem 2rem; border-radius:10px; margin-top:1rem; cursor:pointer;}
</style>
</head>
<body>

<div class="container" id="pageContainer">
  <!-- Dynamic content injected here -->
</div>

<script>
// Quest data
const questData = {
  Strengths: {
    "Personal Traits": ["Adaptable","Ambitious","Assertive","Authentic"],
    "Interpersonal Skills": ["Active listener","Approachable","Collaborative"]
  },
  Weaknesses: {
    "Personal": ["Impatient","Procrastinator"],
    "Interpersonal": ["Shy","Overly critical"]
  },
  Opportunities: {
    "Learning": ["Courses","Workshops","Mentorship"],
    "Networking": ["Events","Online communities"]
  },
  Challenges: {
    "Time Management": ["Deadlines","Multitasking"],
    "Technical": ["New tools","Complex projects"]
  }
};

// Pages
const pages = ["NameDept","Strengths","Weaknesses","Opportunities","Challenges"];
let pageIndex = 0;
let currentSubcats = [];
let subcatIndex = 0;

const userData = { name:"", department:"", Strengths:{}, Weaknesses:{}, Opportunities:{}, Challenges:{} };

// Render current page
function renderPage(){
  const container = document.getElementById('pageContainer');
  container.innerHTML = `<div class="page-counter">Page ${pageIndex+1} of ${pages.length}</div>`;
  const pageName = pages[pageIndex];

  if(pageName==="NameDept"){
    container.innerHTML += `
      <h2>Enter your details ðŸŒŸ</h2>
      <input id="nameInput" placeholder="Name" style="padding:0.5rem 1rem; font-size:1rem; margin:0.5rem;"><br>
      <select id="departmentSelect" style="padding:0.5rem 1rem; font-size:1rem; margin:0.5rem;">
        <option value="">--Select Department--</option>
        <option>Cyber Security</option>
        <option>CSE-1</option>
        <option>Medical Electronics</option>
        <option>Mechanical Engineering</option>
        <option>ECE-1</option>
      </select><br>
      <button onclick="nextPage()">Next</button>
    `;
  } else {
    const category = pageName;
    if(subcatIndex === 0) currentSubcats = Object.keys(questData[category]);
    if(subcatIndex < currentSubcats.length){
      renderSelector(category, currentSubcats[subcatIndex]);
    } else {
      subcatIndex=0;
      pageIndex++;
      if(pageIndex>=pages.length){
        renderSummary();
      } else renderPage();
    }
  }
}

// Render subcategory selector
function renderSelector(category, subcat){
  const container = document.getElementById('pageContainer');
  container.innerHTML = `<h2>${category} - ${subcat}</h2><p>Select your options:</p>`;
  const optionContainer = document.createElement("div");
  questData[category][subcat].forEach(opt=>{
    const tile = document.createElement("div");
    tile.className="tile"; tile.textContent=opt;
    tile.onclick=()=>tile.classList.toggle("selected");
    optionContainer.appendChild(tile);
  });
  container.appendChild(optionContainer);

  const btn = document.createElement("button");
  btn.textContent="Next"; 
  btn.onclick=()=>{
    const selected = Array.from(optionContainer.getElementsByClassName("selected")).map(el=>el.textContent);
    userData[category][subcat] = selected;
    subcatIndex++;
    renderPage();
  }
  container.appendChild(btn);
}

// Move from NameDept page
function nextPage(){
  if(pageIndex===0){
    const name = document.getElementById('nameInput').value.trim();
    const dept = document.getElementById('departmentSelect').value;
    if(!name || !dept){ alert("Please fill name and department"); return; }
    userData.name=name; userData.department=dept;
  }
  pageIndex++;
  renderPage();
}

// Summary & PDF download
function renderSummary(){
  const container = document.getElementById('pageContainer');
  container.innerHTML = `<h2>Summary & Download PDF ðŸŒŸ</h2><p>Click below to download your SWOC Quest results:</p>`;
  const btn = document.createElement("button"); btn.id="downloadBtn"; btn.textContent="Download PDF";
  btn.onclick = renderPDF;
  container.appendChild(btn);

  // Optional: display summary on screen
  const pre = document.createElement("pre"); pre.style.textAlign="left"; pre.style.marginTop="1rem";
  pre.textContent = JSON.stringify(userData, null, 2);
  container.appendChild(pre);
}

// PDF generation
function renderPDF(){
  const { jsPDF } = window.jspdf;
  const doc = new jsPDF();
  doc.setFont("helvetica","bold");
  doc.setFontSize(18); doc.text("SWOC Quest Summary",20,20);
  doc.setFontSize(12); doc.setFont("helvetica","normal");
  doc.text(`Name: ${userData.name}`,20,30);
  doc.text(`Department: ${userData.department}`,20,37);

  let y=50;
  for(const cat of ["Strengths","Weaknesses","Opportunities","Challenges"]){
    doc.setFont("helvetica","bold"); doc.text(cat,20,y); y+=7;
    doc.setFont("helvetica","normal");
    for(const subcat in userData[cat]){
      doc.text(`- ${subcat}: ${userData[cat][subcat].join(", ")}`,22,y); y+=7;
    }
    y+=3;
  }

  doc.save("SWOC_Quest.pdf");
  alert("PDF downloaded! ðŸŒŸ");
}

// Initialize first page
renderPage();
</script>

</body>
</html>
